<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/adminDefault}">
    <!-- 사용자 정의 타이틀 설정 -->
	<th:block layout:fragment="customTitle">
	   <title>카테고리관리_중분류</title>
	</th:block>
	
	<!-- 사용자 정의 contents -->
	<th:block layout:fragment="customContents">
		<div class="right_col" role="main">
		 <div class="">
		  <div class="page-title">
		    <div class="title_left">
		     <h3>카테고리관리</h3>
		    </div>
		    <div class="clearfix"></div>
			<div class="row">
			   <div class="col-md-12 col-sm-12 ">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>중분류관리</h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="#">Settings 1</a>
                            <a class="dropdown-item" href="#">Settings 2</a>
                          </div>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                 <div class="x_content">
                  <div class="row">
                   <div class="col-sm-12">
                    <div class="card-box table-responsive">
                       <div style="margin-right:10px;" class="d-flex justify-content-end">
	                     <button th:onclick="|location.href='@{/admin/goods/goodsMediumCategoryAdd}'|" class="btn btn-success" type="button">등록</button>
	                  </div>
                      <table id="datatable-checkbox" class="table table-striped table-bordered bulk_action" style="width:100%">
                       <thead>
                        <tr>
                          <th>대분류코드</th>
						  <th>중분류코드</th>
					      <th>중분류이름</th>
						  <th>업데이트시각</th>
						  <th>아이디</th>
					      <th>중분류수정/삭제</th>
                        </tr>
                      </thead>
                      <tbody>
                         <tr th:if="${not #lists.isEmpty(goodsMediumCategoryList)}" th:each="l : ${goodsMediumCategoryList}">
	                           <td th:text="${l.CategoryCode}"></td>
	                           <td th:text="${l.CategoryCodeSub}"></td>
	                           <td th:text="${l.CategoryNameSub}"></td>
	                           <td th:text="${l.registrationDatetime}"></td>
	                           <td th:text="${l.Id}"></td>
	                           <td>
	                            	<button class="btn btn-success" th:onclick="|location.href='@{/admin/goods/goodsMediumCategoryModify(categoryCodeSub=${l.categoryCodeSub})}'|" type="button">수정</button>
				                    <button class="btn btn-success deleteCategoryModalBtn"
											type="button" th:data-categoryCode="${l.categoryCodeSub}">삭제</button>
	                           </td>
                       </tbody>
                    </table>
	              </div>
	             </div>
	            </div>
	           </div>
	          </div> 
            </div>     
           </div>
          </div>
         </div>
        </div>
        <!-- 삭제 모달 -->
		<div id="modalRemove" class="removeModal">
			<div class="removeModal-window">
				<div class="modal-content">
					<div class="modal-title">
						<h3>상품 중분류 삭제</h3>
					</div>
					<div class="row">
						<div class="x_content">
							<br />
							<form id="demo-form2" data-parsley-validate
								class="form-horizontal form-label-left"
								th:action="@{/admin/goods/deleteGoodsMediumCategory}"
								method="get">
								<div class="item form-group">
									<div class="col-md-6 col-sm-6 ">
										<h6 class="modal_style">해당 카테고리를 삭제하시겠습니까?</h6>
									</div>
								</div>
								<div class="item form-group" align="center"
									style="margin-top: 30px;">
									<div class="col-md-6 col-sm-6 offset-md-3">
										<span class="row"> <input type="hidden"
											name="categoryCodeSub" id="deleteCategoryCode">
											<button class="btn btn-primary" type="submit">삭제</button>
											<button class="btn btn-primary" type="reset">취소</button>
										</span>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		</th:block>
		<!-- end contents -->
		<th:block layout:fragment="customFootScript">
			<script>
							
			  	$(document).on('click', '.deleteCategoryModalBtn', function() {
			  		var categoryCode = $(this).attr('data-categoryCode');
					var $deleteCategoryCode = $('#deleteCategoryCode');
			  		
			        $('#modalRemove').css({
			            display: 'flex',
			        });
			        $deleteCategoryCode.val(categoryCode);
			    })
			     $('.btn').click(function() {
			        $('#modalRemove').css({
			             display: 'none',
			        });
			    })
			</script>
		
		</th:block>
	

</html>