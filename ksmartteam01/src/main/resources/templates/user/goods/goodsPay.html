<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">
	  
	<!-- 사용자 정의 JS 상단 -->
	<th:block layout:fragment="customTopJs">
	<!-- jQuery -->
    <!-- <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script> -->
    
	</th:block>
	<!-- 사용자 정의 타이틀 설정 -->
	<th:block layout:fragment="customTitle">
		<title>상품결제 </title>
	</th:block>
	
	<th:block layout:fragment="customContents">
	
    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-section" data-setbg="/img/breadcrumb.jpg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text aco-title">
                        <h3 class="font-weight-bold">주문/결제</h3>
                    </div>
                </div>                
            </div>
             
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Product Details Section Begin -->
	<section class="product-details pt-0">
        <div class="container">
            <div class="row">      
		    	<div class="col-lg-8">
		    		<div>
		    			<div class="border-bottom-between">
							<h5 class="font-weight-bold">배송지</h5>
							<button type ="button" class="btn btn-primary text" data-toggle="modal" data-target="#addressUpdate">변경</button>
						</div>
						
						<!-- Modal -->
						<div class="modal fade z-index" id="addressUpdate" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title text-center" id="exampleModalLabel">배송지 선택</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										<div class="mt-3">
											<h4>김현진<span class="border-badge ml-3">기본배송지</span></h4>
											<p class="mt-2">전북 전주시 완산구 맏내로 38 평화3차골드클래스 , 302동 1801호</p>
											<p class="text-gray-sm">김현진 010-7722-6965</p>
											<div class="d-flex justify-content-end form-group mt-3">																						
												<button type="button" id="addressUpdateBtn" class="btn w-auto btn-outline-secondary" data-toggle="modal" data-target="#addressUpdateModal">수정</button>
												<button type="button" class="btn w-auto btn-warning ml-3">선택</button>
										  	</div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary">기본배송지로선택</button>
									</div>
								</div>
							</div>
						</div>
						
						<!-- Modal -->
						<div class="modal fade z-index" id="addressUpdateModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title text-center" id="exampleModalLabel">배송지 선택</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										<div class="mt-3">
										   	<div class="form-group form-display-layout mt-3">
											    <label for="userName" class="text-nowrap">받는사람</label>
											    <input type="text" class="form-control form-el" id="userName" placeholder="받는사람">
										   	</div>
										   	<div class="form-group form-display-layout mt-3">
											    <label for="userName" class="text-nowrap">연락처</label>
											    <input type="number" class="form-control form-el" id="userName" placeholder="연락처">
										   	</div>
										   	<div class="form-group form-display-layout mt-3">
				               				<div class="form-group form-display-layout mt-3">
											    <label for="userName" class="text-nowrap">주소</label>
				                                <div>
				                                    <input id="address_kakao" name="address" readonly class="form-control" type="text">
				                                    <input id="address_kakao" name="address_detail" class="form-control" type="text">
				                                </div>
										   	</div>
										   	</div>
										   	
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary">수정완료</button>
									</div>
								</div>
							</div>
						</div>
						
						
						<div th:objcet="${memberInfo}" class="mt-3">
							<span class="border-badge">기본배송지</span><h4 id="memberName" name="memberName" th:text="${memberInfo.memberName}"></h4>
							<p class="mt-2"></p>
							<p id="memberAdress" name="memberAdress" th:text="${memberInfo.memberAdress}" class="mt-2"></p>
							<p id="memberName" name="memberName" th:text="${memberInfo.memberName}"  class="text-gray-sm"></p>
							<p id="memberPhone" name="memberPhone" th:text="${memberInfo.memberPhone}" class="text-gray-sm"></p>
							<div class="form-group mt-3">
							   <label></label>
							    <select class="form-control">
							      <option>배송전에 미리 연락주세요.</option>
							      <option>부재시 경비실에 맡겨주세요.</option>
							    </select>
							  </div>
						</div>
									
		    		</div>
					
					<div class="mt-5">
						<div class="border-bottom">
							<h5 class="font-weight-bold">주문자</h5>	
						</div>
						
						<div class="form-group form-display-layout mt-3">
						    <label for="userName" class="text-nowrap">아이디</label>
						    <input type="email" class="form-control form-el" id="userName" placeholder="아이디">
					   	</div>	
						<div class="form-group form-display-layout mt-3">
						    <label for="userName" class="text-nowrap">이름</label>
						    <input type="email" class="form-control form-el" id="userName" placeholder="이름">
					   	</div>	
					   	<div class="form-group form-display-layout">
						    <label for="userName" class="text-nowrap">이메일 </label>
						    <input type="email" class="form-control form-el" id="userName" placeholder="이메일">
					   	</div>	
					   	<div class="form-group form-display-layout">
						    <label for="userName" class="text-nowrap">휴대전화 </label>
						    <div class="d-flex form-el">
						    	<select class="form-control">
							      <option>010</option>
							      <option>011</option>
							      <option>017</option>
							    </select>
							     <input  type='number'  class="form-control ml-3" value="7722">
							     <input  type='number'  class="form-control ml-3" value="7722">
						    </div>
					   	</div>	
					</div>
					
					<div class="mt-5">
						<div class="border-bottom">
							<h5 class="font-weight-bold">주문상품</h5>
		    			</div> 
		    			<div class="mt-3">
							<div class="order-product-box">
								<div class="top">
								업체명
								</div>
								<ul class="product-list">
									<li th:if="${not #lists.isEmpty(goodsOrderList)}" th:each="g : ${goodsOrderList}">
										<div class="ml-3">
											<p th:text="${g.goodsCode}"></p>
											<p>
												<span th:text="${g.orderPrice}"></span>
												<span th:text="${g.orderQuantity}"></span>
											</p>
										</div>
									</li>
								</ul>
							</div>
						</div>         
		    		</div>
		    		
		    		<div class="mt-5">
						<div class="border-bottom">
							<h5 class="mb-3 font-weight-bold">포인트</h5>	
		    			</div>          
		    			<div class="mt-3">
							<div class="d-flex">
								<input type="email" class="form-control form-el mr-2" value="0">
								<button type="button" class="btn btn-primary md">
								전액사용
								</button>
							</div>
							
							<p class="mt-2">
							사용가능 포인트
							<span class="text-primary">90P</span>
							</p>
						</div>
		    		</div>
		    		
		    		<div class="mt-5">
						<div class="border-bottom">
							<h5 class="mb-3 font-weight-bold">결제수단</h5>	
		    			</div>          
		    			<div class="mt-3">
							<div class="d-flex">
								<input type="email" class="form-control form-el mr-2" value="0">
								<button type="button" class="btn btn-primary md">
								전액사용
								</button>
							</div>
							
							<p class="mt-2">
							사용가능 포인트
							<span class="text-primary">90P</span>
							</p>
						</div>
		    		</div>
				</div>
				<div class="col-lg-4 col-md-6">
		            <div class="product__details__text pay_box position-relative"> 
		                <div class="product__details__price">
		                	<h3>결제금액</h3>
		                	<div class="d-flex justify-content-between info mb-2">
		                		<span>총 상품금액</span>
		                		<span>110,000</span>
		                	</div>
		                	<div class="d-flex justify-content-between info mb-2">
		                		<span>배송비</span>
		                		<span>2,500</span>
		                	</div>
		                	<div class="border-top d-flex justify-content-between pt-2">
		                		<h3>최종 결제금액</h3>
		                		<h3><span class="text-primary md-text">₩112,500</span>원</h3>
		                	</div>
		                	
		                </div>
		               
						<button onclick="requestPay()" type="button" class="btn btn-primary mt-2 pay-btn">180,000원 결제하기</button>
		            </div>
		        </div>
        	</div>
		</div>
	</section>
    <!-- Product Details Section End -->

    <!-- Related Product Section End -->	
	</th:block>
	<!-- 사용자 정의 JS 하단 -->
	<th:block layout:fragment="customFootJs">
			<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
			<script>
				window.onload = function(){
				    document.getElementById("address_kakao").addEventListener("click", function(){ //주소입력칸을 클릭하면
				        //카카오 지도 발생
				        new daum.Postcode({
				            oncomplete: function(data) { //선택시 입력값 세팅
				                document.getElementById("address_kakao").value = data.address; // 주소 넣기
				                document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱
				            }
				        }).open();
				    });
				}
			</script>
			<!-- jQuery -->
			<script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
			<script>
		        var IMP = window.IMP; 
		        IMP.init("imp27140510"); 
	
		        function requestPay() {
		            IMP.request_pay({
		                pg : 'html5_inicis',
		                pay_method : 'card',
		                merchant_uid: "57008833-33004", 
		                name : '당근 10kg',
		                amount : 1004,
		                buyer_email : 'Iamport@chai.finance',
		                buyer_name : '아임포트 기술지원팀',
		                buyer_tel : '010-1234-5678',
		                buyer_addr : '서울특별시 강남구 삼성동',
		                buyer_postcode : '123-456'
		            }, function (rsp) { // callback
		                if (rsp.success) {
		                    console.log(rsp);
		                } else {
		                    console.log(rsp);
		                }
		            });
		        }
		</script>	
		<script>
				/*
				$(function(){
					
					$('#addressUpdateBtn').click(function(){
						$('#addressUpdate').css('display','none');
					})		
					
					$('.close').click(function(){
						$('.modal-backdrop').css('display', 'none');
					})
					
				})
				*/
		</script>
		
	</th:block>
	<!-- iamport.payment.js -->
</html> 